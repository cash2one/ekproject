<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>DOJO MVC</title>
		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="this is my page">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<script src="/js/dojo/dojo.js"></script>
		<script src="/js/elam/base.js"></script>
		<script type="text/javascript">
		    dojo.require("dijit.dijit");
		    dojo.require("elam._base.Controller");
		    dojo.require("dojo.data.ItemFileReadStore");
		    dojo.require("dojox.data.XmlStore");
		    dojo.require("elam.data.DataStore");		
		</script>
			 
		<script type="text/javascript">
	       djConfig={
	            isDebug:true
	            ///parseOnLoad:true
	        };
       // 
       dojo.subscribe('time',function(data){
            console.debug('更新time数据:'+data);
            dojo.byId('time').value=data;
       });
       
       dojo.subscribe('val',function(data){
            console.debug('更新value数据:'+data);
            ///alert('最新Value的直:'+data);
             dojo.byId('val').value=data;
       });
       
       dojo.subscribe('list',function(data){
            console.debug('更新list数据:'+data);
            ///alert('接收到服务器的list：'+data);
            dojo.byId('list').innerHTML=data;
       });
      
       /// var test = new elam.data.DataStore('/data/data.json','myTestTable',0);       
       //showTableDataStore('/data/data.json','myTestTable');
       
       //showTableDataStore('/data/test.xml','test_1','xml');          
       
    </script>
	</head>

	<body>
		<table width="100%">
			<tr>
				<td width="350px;">
					value:
					<input type="text" id="val" value="">
					</label>
				</td>
			</tr>
			<tr>
				<td width="350px;">
					Time:
					<input type="text" id="time" value="">
					</label>
				</td>
			</tr>
			<tr>
				<td width="350px;">
					<div id="list"></div>
				</td>
				</td>
			</tr>
			<tr>
			<td>
				<input type="button"
					onclick="elam._base.Controller.remoteUpdate ('http://localhost/data/test.jsp',
		   ['val'],{'action':'querybyuserid'});"
					value="获取数值" />
		
				<input type="button"
					onclick="elam._base.Controller.remoteUpdate ('http://localhost/data/test.jsp',
		   ['time'],{'action':'querybyuserid'});"
					value="更新时间" />
		
				<input type="button"
					onclick="elam._base.Controller.remoteUpdate ('http://localhost/data/test.jsp',
		   ['time','val','list'],{'action':'querybyuserid'});"
					value="获取最新数据" />
			</td>
			</tr>
		 </table>
          
         <table id="myTable">
         <table id="myTestTable">
         <table id="test_1">
          <input type="button" value="myTable" onclick="showTableDataStore('/data/test.xml','myTable','xml');"/>
          <input type="button" value="myTestTable" onclick="showTableDataStore('/data/data.json','myTestTable');"/>
          <input type="button" value="test_1" onclick="showTableDataStore('/data/jsonlist.jsp','test_1');"/>
         </table>			
	</body>
</html>
