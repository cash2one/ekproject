<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Javascript MVC-Dojo Widget</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
   <script src="/js/dojo/dojo.js"></script>
		<script type="text/javascript">
		    dojo.require("dijit.dijit");
		</script>	
  </head>
  <body></body>
  
  <script type="text/javascript">
       djConfig={
            isDebug:true
            ///parseOnLoad:true
        };
      
       console.debug('加载Widgets页面');
       // 
       dojo.subscribe('time',function(data){
            console.debug('更新time数据:'+data);
            dojo.byId('time').value=data;
       });
       
        console.debug("dojo.body():"+dojo.body());
        
        dojo.declare("emailDisplayer", dijit._Widget, { 
		    replaceString : "", 
		    _setEmailAttr : function(value) { 
			        if (!value) { 
			            return; 
			        } 
			        var originalValue = value; 
			        var displayValue = value; 
			        if (this.replaceString) { 
			            displayValue = displayValue.replace(/@/, this.replaceString); 
			        } 
			        this.domNode.innerHTML = displayValue; 
			        this.email = originalValue; 
		     },
              print:function(){
                   console.debug('emailDisplayer.print.....');
              }
        }); 

		 var n = dojo.create("div", null, dojo.body()); 
		 var displayer = new emailDisplayer({}, n); 
		 displayer.attr("replaceChar", "#"); 
		 displayer.attr("email", "alex@example.org"); 
		 displayer.attr("email"); 
         displayer.print();
         
         dojo.create("a", {href: "/dojo/mvc.html", title: "Goto MVC!",innerHTML: "MVC" },dojo.body());
    
    </script>
</html>
